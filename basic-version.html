<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Happy Birthday Surprise</title>
    <style>
        body {
            margin: 0; padding: 0; background-color: #000; overflow: hidden;
            font-family: 'Segoe UI', sans-serif; color: white;
        }
        #canvas { position: fixed; top: 0; left: 0; width: 100%; height: 100%; z-index: 1; display: none; }
        .page { position: fixed; top: 0; left: 0; width: 100%; height: 100%; display: flex; flex-direction: column; justify-content: center; align-items: center; z-index: 10; transition: 0.8s; }
        #page-1 { background: #0a0a0a; z-index: 100; }
        #gift-button { font-size: 90px; background: none; border: none; cursor: pointer; animation: bounce 2s infinite; }
        @keyframes bounce { 0%, 100% { transform: translateY(0); } 50% { transform: translateY(-20px); } }
        
        .hidden { opacity: 0; visibility: hidden; pointer-events: none; }
        
        .photo-container { display: flex; gap: 15px; margin-bottom: 25px; flex-wrap: wrap; justify-content: center; }
        .photo-container img { width: 120px; height: 120px; object-fit: cover; border: 4px solid white; border-radius: 15px; box-shadow: 0 10px 20px rgba(0,0,0,0.5); }
        
        .message-box {
            background: rgba(255, 255, 255, 0.1);
            padding: 30px; border-radius: 25px; text-align: center;
            max-width: 400px; width: 85%; backdrop-filter: blur(15px);
            border: 1px solid rgba(255,255,255,0.2);
            transform: scale(0.9); transition: 0.5s;
        }
        .page-active .message-box { transform: scale(1); }

        #btn-next {
            position: fixed; bottom: 50px; padding: 12px 25px; border-radius: 30px;
            border: 2px solid white; background: rgba(255,255,255,0.1); color: white; cursor: pointer;
            backdrop-filter: blur(5px); z-index: 50;
        }

        /* Gaya tambahan untuk kursor mengetik */
        #typing-text::after {
            content: '|';
            animation: blink 0.7s infinite;
            color: #ff00de;
        }
        @keyframes blink { 0%, 100% { opacity: 1; } 50% { opacity: 0; } }
    </style>
</head>
<body>
    <audio id="music" loop> 
        <source src="https://luzairx.github.io/Music/athousand-years.mp3" type="audio/mpeg">
    </audio>

    <canvas id="canvas"></canvas>

    <div id="page-1" class="page">
        <h1>Happy Birthday (nama) !</h1>
        <button id="gift-button">üéÅ</button>
        <p style="color: #888;">Klik kado untuk kejutan</p>
    </div>

    <div id="page-2" class="page hidden">
        <button id="btn-next">Lihat Pesan Spesial ‚ú®</button>
    </div>

    <div id="page-3" class="page hidden" style="background: rgba(0,0,0,0.7);">
        <div class="photo-container">
            <img src="https://birthdaysx.github.io/Foto/pp1.jpeg" alt="Foto 1">
            <img src="https://birthdaysx.github.io/Foto/pp2.jpeg" alt="Foto 2">
        </div>
        <div class="message-box">
            <h2 style="color: #ff00de;">Happy Birthday (Nama)</h2>
            <!-- Bagian teks yang akan dianimasikan -->
            <p id="typing-text"></p>
            <p style="font-weight: bold; margin-top: 10px; color: #ff00de;"></p>
            <button onclick="location.reload()" style="background:none; border:none; color:rgba(255,255,255,0.5); cursor:pointer; text-decoration:underline; margin-top:15px;">Putar Lagi</button>
        </div>
    </div>

    <script>
        const canvas = document.getElementById('canvas');
        const ctx = canvas.getContext('2d');
        const music = document.getElementById('music');
        let width, height, particles = [], lasers = [], isStarted = false;

        // Konten untuk animasi mengetik
        const fullMessage = "Selamat ulang tahun ya sayangg!! Semoga semua impianmu tercapai. Selamat bertumbuh jadi versi yang lebih baik, panjang umur dan sehat selalu. Maaf ga bisa ngasih apa-apa cuma bisa ngasih ucapan kecil ini. Semangat selalu anak pertama‚ù§Ô∏è";

        function resize() { width = canvas.width = window.innerWidth; height = canvas.height = window.innerHeight; }
        window.addEventListener('resize', resize); resize();

        class SharpParticle {
            constructor(x, y, color) {
                this.x = x; this.y = y; this.color = color;
                const angle = Math.random() * Math.PI * 2;
                const speed = Math.random() * 12 + 3;
                this.velocity = { x: Math.cos(angle) * speed, y: Math.sin(angle) * speed };
                this.friction = 0.94; this.gravity = 0.2; this.opacity = 1;
                this.decay = Math.random() * 0.02 + 0.015;
            }
            draw() {
                ctx.save(); ctx.globalAlpha = this.opacity; ctx.beginPath();
                ctx.moveTo(this.x, this.y); ctx.lineTo(this.x - this.velocity.x * 5, this.y - this.velocity.y * 5);
                ctx.strokeStyle = this.color; ctx.lineWidth = 1.2; ctx.stroke(); ctx.restore();
            }
            update() {
                this.velocity.x *= this.friction; this.velocity.y *= this.friction;
                this.velocity.y += this.gravity; this.x += this.velocity.x; this.y += this.velocity.y;
                this.opacity -= this.decay;
            }
        }

        class Laser {
            constructor(targetX, targetY) {
                this.x = width / 2; this.y = height;
                this.targetX = targetX; this.targetY = targetY;
                const angle = Math.atan2(targetY - this.y, targetX - this.x);
                this.speed = 2.5; this.acceleration = 1.1;
                this.velocityUnit = { x: Math.cos(angle), y: Math.sin(angle) };
                this.color = `hsl(${Math.random() * 360}, 100%, 75%)`;
            }
            draw() {
                ctx.save(); ctx.beginPath(); ctx.moveTo(this.x, this.y);
                ctx.lineTo(this.x - this.velocityUnit.x * this.speed * 3, this.y - this.velocityUnit.y * this.speed * 3);
                ctx.strokeStyle = this.color; ctx.lineWidth = 2; ctx.stroke(); ctx.restore();
            }
            update() {
                this.speed *= this.acceleration; this.x += this.velocityUnit.x * this.speed; this.y += this.velocityUnit.y * this.speed;
                if (this.y <= this.targetY) { this.explode(); return false; }
                return true;
            }
            explode() {
                for (let i = 0; i < 50; i++) particles.push(new SharpParticle(this.x, this.y, this.color));
            }
        }

        function animate() {
            ctx.fillStyle = 'rgba(0, 0, 0, 0.2)'; ctx.fillRect(0, 0, width, height);
            lasers = lasers.filter(l => { l.draw(); return l.update(); });
            particles = particles.filter(p => { p.draw(); p.update(); return p.opacity > 0; });
            if (lasers.length === 0) lasers.push(new Laser(Math.random()*width, Math.random()*height*0.4));
            requestAnimationFrame(animate);
        }

        // Fungsi Animasi Mengetik
        function typeWriter(text, elementId, speed) {
            let i = 0;
            const element = document.getElementById(elementId);
            element.innerHTML = "";
            function type() {
                if (i < text.length) {
                    element.innerHTML += text.charAt(i);
                    i++;
                    setTimeout(type, speed);
                }
            }
            type();
        }

        document.getElementById('gift-button').onclick = () => {
            music.play().catch(e => console.log(e));
            document.getElementById('page-1').classList.add('hidden');
            canvas.style.display = 'block';
            document.getElementById('page-2').classList.remove('hidden');
            animate();
        };

        document.getElementById('btn-next').onclick = () => {
            document.getElementById('page-2').classList.add('hidden');
            const p3 = document.getElementById('page-3');
            p3.classList.remove('hidden');
            setTimeout(() => {
                p3.classList.add('page-active');
                // Mulai animasi mengetik setelah halaman muncul
                typeWriter(fullMessage, "typing-text", 50);
            }, 100);
        };
    </script>
</body>
</html>